### 接口和抽象类的区别

#### 1.抽象类和接口的语法特性

**抽象类**    

- 抽象类不允许被实例化，只能被继承。也就是说，你不能 new 一个抽象类的对象出来，否则会报编译错误
- 可以包含属性和方法。方法既可以包含代码实现，也可以不包含代码实现。不包含代码实现的方法叫作抽象方法。
- 子类继承抽象类，必须实现抽象类中的所有抽象方法。

**接口**      

- 不能包含属性，
- 只能声明方法，方法不能包含代码实现。
- 类实现接口的时候，必须实现接口中声明的所有方法。

#### 2.抽象类和接口存在的意义

**抽象类**是对**成员变量和方法的抽象**，是一种 **is-a** 关系，是为了解决**代码复用**问题。

**接口**仅仅是对**方法的抽象**，是一种 **has-a** 关系，表示具有某一组行为特性，是为了解决**解耦**问题，隔离接口和具体的实现，提高代码的**扩展性**。

##### 模拟抽象类和接口两个语法概念

实际上，我们可以通过抽象类来模拟接口。怎么来模拟呢？这是一个不错的面试题

> 我们先来回忆一下接口的定义：
>
> 接口中没有成员变量，只有方法声明，没有方法实现，实现接口的类必须实现接口中的所有方法。

只要满足这样几点，从设计的角度上来说，我们就可以把它叫作接口。实际上，要满足接口的这些语法特性并不难。在下面这段 C++ 代码中，我们就用抽象类模拟了一个接口（下面这段代码实际上是策略模式中的一段代码）。

```C++
class Strategy { // 用抽象类模拟接口
  public:
    ~Strategy();
    virtual void algorithm()=0;
  protected:
    Strategy();
};
```

抽象类 Strategy 没有定义任何属性，并且所有的方法都声明为 virtual 类型（等同于 Java 中的 abstract 关键字），这样，所有的方法都不能有代码实现，并且所有继承这个抽象类的子类，都要实现这些方法。从语法特性上来看，这个抽象类就相当于一个接口。

除了用抽象类来模拟接口之外，我们还可以**用普通类来模拟接口**。具体的 Java 代码实现如下所示。

```java

public class MockInteface {
  private MockInteface() {}
  public void funcA() {
    throw new MethodUnSupportedException();
  }
}
```

1.类中的方法必须包含实现，这个不符合接口的定义。但是，我们可以让类中的方法抛出 MethodUnSupportedException 异常，来模拟不包含实现的接口，并且能强迫子类在继承这个父类的时候，都去主动实现父类的方法，否则就会在运行时抛出异常。

2.将这个类的构造函数声明为 private 访问权限,就可以避免这个类被实例化。

**用普通类来模拟抽象类**

1.抽象类不能实例化，所以普通类的构造方法也需要私有化，防止对象实例化

 2. 抽象类中可以有没有实现的方法，那在普通类中的方法就需要抛出异常，当子类继承普通类的时候，再重写该方法即可。

#### 3.抽象类和接口的应用场景区别

- 如果要表示一种 is-a 的关系，并且是为了解决代码复用问题，我们就用抽象类；
- 如果要表示一种 has-a 关系，并且是为了解决抽象而非代码复用问题，那我们就用接口。
- 从类的继承层次上来看，抽象类是一种自下而上的设计思路，先有子类的代码重复，然后再抽象成上层的父类（也就是抽象类）。而接口正好相反，它是一种自上而下的设计思路。我们在编程的时候，一般都是先设计接口，再去考虑具体的实现。

----

#### 补充：

1.java中抽象类是类，而java不支持多继承，当想要实现多继承的时候只能使用表示has-a的接口来实现。
2.在java8之前，定义的接口不能有具体实现，这会导致在后续维护的时候如果想要在接口中新增一个方法，必须在所有实现类中都实现一遍，并且只有几个新的实现类可能要去具体实现，其他的都只是加上默认实现，这样比较麻烦。在java8中接口可以用使用关键字default，来实现一个默认方法，这样就解决了上述的麻烦。

3.Java接口中可以定义静态方法、default方法，枚举类型，接口中还可以定义接口（嵌套）。

----

如果面试官再让你聊聊接口和抽象类，你会如何回答呢？

> 聊：定义、区别（是什么），存在意义（从哪来），应用（到哪去）。
>
> 1、定义：
> 抽象类：不允许实例化，只能被继承；可包含属性和方法，包含抽象方法；子类继承抽象类必须重写抽象方法。
> 接口：不允许实例化，只能被实现；不包含属性和普通方法，包含抽象方法、静态方法、default 方法；类实现接口时，必须实现抽象方法。
> 2、意义：
> 抽象类：解决复用问题，适用于is-a的关系。
> 接口：解决抽象问题，适用于has-a的关系。
> 3、应用：
> 例如：
> 解决复用问题：java中的子类FileInputStream和PipeInputStream等继承抽象类InputStream。重写了read(source)方法，InputStream 中还包含其他方法，FileInputStream继承抽象类复用了父类的其他方法。
> 解决抽象问题：抽象类InputStream实现了Closeable接口，该接口中包含close()抽象方法。Closeable这个接口还在很多其他类中实现了，例如Channel，Socket中都有close() 关闭这个功能，但具体实现每个类又各有不同的实现，这个就是抽象。

