### 4.配置解析

#### 1.核心配置文件

- mybatis-config.xml
- MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。

```xml
configuration（配置）
properties（属性）
settings（设置）
typeAliases（类型别名）
typeHandlers（类型处理器）
objectFactory（对象工厂）
plugins（插件）
environments（环境配置）
environment（环境变量）
transactionManager（事务管理器）
dataSource（数据源）
databaseIdProvider（数据库厂商标识）
mappers（映射器）
```

#### 2.环境配置

Mybatis可以配置成适应多种环境

**不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。**

Mybatis默认的事务管理器(transactionManager)是JDBC     <transactionManager type="JDBC">，学会使用配置多套运行环境

默认连接池是 POOLED     <dataSource type="POOLED">

#### 3.属性（properties）

可以通过properties属性来实现引用配置文件。

这些属性可以在外部进行配置，并可以进行动态替换。你既可以在典型的 Java 属性文件中配置这些属性，也可以在 properties 元素的子元素中设置。【db.properties】

注意：

> The content of element type "configuration" must match "(properties?,settings?,typeAliases?,typeHandlers?,objectFactory?,objectWrapperFactory?,reflectorFactory?,plugins?,environments?,databaseIdProvider?,mappers?)".

![image-20201120111943061](https://gitee.com/sunnyzq/my-image-hosting-service/raw/master/img//image-20201120111943061.png)

编写一个数据库配置文件

db.properties：

```xml
driver = com.mysql.jdbc.Driver
url = jdbc:mysql://localhost:3306/mybatis?useSSl=true&useUnicode=true&characterEncoding=UTF-8
username = root
password = root
```

在核心文件中引入

```xml
<!--引入外部配置文件-->
<properties resource="db.properties">
    <property name="username" value="root"/>
    <property name="password" value="123456"/>
</properties>
```

注意：

- 可以直接引入配置文件
- 可以在其中增加一些配置
- 如果两个文件中有同一个字段，优先使用外部配置文件的。

#### 4.类型别名（typeAliases）

- 类型别名可为 Java 类型设置一个缩写名字。
-  它仅用于 XML 配置，意在降低冗余的全限定类名书写。

```xml
    <!--可以给实体类起别名-->
    <typeAliases>
        <typeAlias type="com.szq.pojo.User" alias="User"/>
    </typeAliases>
```

也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean,

扫描实体类的包，他的默认别名就是这个类的类名，首字母小写（也可以和类名相同，不会报错）。

```xml
    <!--可以给实体类起别名-->
    <typeAliases>
        <package name="com.szq.pojo"/>
    </typeAliases>
```

在实体类比较少的时候，用第一种；实体类多时，用第二种

第一种可以自定义别名，第二种则不可以，如果第二种需要别名，则应在实体类增加注解

```java
@Alias("user")
public class User {}
```

#### 5.设置

这是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为。 

![image-20201120114725094](https://gitee.com/sunnyzq/my-image-hosting-service/raw/master/img//image-20201120114725094.png)

![image-20201120114754101](https://gitee.com/sunnyzq/my-image-hosting-service/raw/master/img//image-20201120114754101.png)

