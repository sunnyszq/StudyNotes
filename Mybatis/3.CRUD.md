### 3.CRUD

#### 1.namespace

1. 将上面案例中的UserMapper接口改名为 UserDao；
2. 将UserMapper.xml中的namespace改为为UserDao的路径 .
3. 再次测试

结论：namespace中的包名要和Dao/mapper接口的包名一致

#### 2.select

- select标签是mybatis中最常用的标签之一
- select语句有很多属性可以详细配置每一条SQL语句

选择，查询语句

- id:就是对应的namespace中的方法名；
- resultType：sql语句执行的返回值；
- parameterType：参数类型

1. 编写接口

   ```java
   //根据ID查询用户
   User getUserById(int id);
   ```

2. 编写对应mapper中的sql语句

   ```java
   <select id="getUserById" parameterType="int" resultType="com.szq.pojo.User">
       select * from mybatis.user where id = #{id}
   </select>
   
   ```

3. 测试

```java
@Test
public void getUserById() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();

    UserMapper mapper =  sqlSession.getMapper(UserMapper.class);

    User user = mapper.getUserById(1);
    System.out.println(user);

    sqlSession.close();
}
```

#### 3.insert

```java
//insert一个用户
int addUser(User user);
```

```java
<insert id="addUser" parameterType="com.szq.pojo.User">
    insert into mybatis.user (id,name,pwd) values (#{id},#{name},#{pwd});
</insert>
```

```java
//增删改需要提交事务
@Test
public void addUser() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();

    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    int res = mapper.addUser(new User(5,"zyn","123"));
    if(res > 0) {
        System.out.println("插入成功！");
    }

    //提交事务! 不然不会插入成功
    sqlSession.commit();

    sqlSession.close();
}
```

#### 4.update

```java
//修改用户
int updateUser(User user);
```

```java
<update id="updateUser" parameterType="com.szq.pojo.User">
    update mybatis.user set name=#{name},pwd = #{pwd} where id=#{id};
</update>
```

```java
@Test
public void updateUser() {
    SqlSession sqlSession = MybatisUtils.getSqlSession();
    UserMapper mapper = sqlSession.getMapper(UserMapper.class);
    mapper.updateUser(new User(5,"yannan","123456"));
    sqlSession.commit();
}
```

#### 5.Delete

```java
<delete id="deleteUser" parameterType="int">
    delete from mybatis.user where id = #{id};
</delete>
```

**注意：增删改需要提交事务   sqlsession.commit();**

